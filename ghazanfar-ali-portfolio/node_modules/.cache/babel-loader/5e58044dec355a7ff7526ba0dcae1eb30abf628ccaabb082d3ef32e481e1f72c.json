{"ast":null,"code":"import { jsx as e } from \"react/jsx-runtime\";\nimport { createContext as t, useState as r, useRef as n, useEffect as o, useContext as s } from \"react\";\nconst i = t({}),\n  c = _ref => {\n    let {\n      children: t,\n      menu: r\n    } = _ref;\n    return e(i.Provider, Object.assign({\n      value: r\n    }, {\n      children: t\n    }));\n  },\n  l = e => {\n    let t = 0;\n    for (; e;) t += e.offsetTop, e = e.offsetParent;\n    return t;\n  },\n  a = function () {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n        activeClassName: t = \"active\",\n        offset: s = 0,\n        smooth: i = !1\n      } = e,\n      [c, a] = r(),\n      d = n(),\n      f = n(new Map()),\n      u = n(new Map());\n    return o(() => {\n      const e = d.current,\n        t = f.current;\n      if (t.size) {\n        const r = () => {\n          let r,\n            n,\n            o = -1 / 0;\n          for (const [i, c] of t.entries()) {\n            const {\n                top: t = 0\n              } = (null == e ? void 0 : e.getBoundingClientRect()) || {},\n              {\n                top: l\n              } = c.getBoundingClientRect();\n            l <= 0 + t + s && l > o && (o = l, r = i), n || (n = i);\n          }\n          a(r || n);\n        };\n        return r(), window.addEventListener(\"resize\", r), e ? (e.addEventListener(\"scroll\", r), () => {\n          window.removeEventListener(\"resize\", r), e.removeEventListener(\"scroll\", r);\n        }) : (window.addEventListener(\"scroll\", r), () => {\n          window.removeEventListener(\"resize\", r), window.removeEventListener(\"scroll\", r);\n        });\n      }\n    }, [s]), o(() => {\n      const e = d.current,\n        t = f.current,\n        r = u.current;\n      if (t.size && r.size) {\n        const n = r => n => {\n          n.preventDefault();\n          const o = t.get(r);\n          if (o && n.target instanceof HTMLElement) if (e) {\n            const {\n              top: t\n            } = e.getBoundingClientRect();\n            e.scrollTo({\n              behavior: i ? \"smooth\" : \"auto\",\n              top: l(o) - t - s\n            });\n          } else window.scrollTo({\n            behavior: i ? \"smooth\" : \"auto\",\n            top: l(o) - s\n          });\n        };\n        let o = [];\n        for (const [e, t] of r.entries()) {\n          const r = n(e);\n          t.addEventListener(\"click\", r), o.push(() => t.removeEventListener(\"click\", r));\n        }\n        return () => {\n          for (const e of o) e();\n        };\n      }\n    }, [s, i]), o(() => {\n      const e = u.current;\n      if (e.size) for (const [r, n] of e.entries()) n.classList.remove(t), r === c && n.classList.add(t);\n    }, [t, c]), {\n      activeId: c,\n      registerContainer: e => d.current = e,\n      registerSection: e => t => f.current.set(e, t),\n      registerTrigger: e => t => u.current.set(e, t)\n    };\n  },\n  d = () => s(i);\nexport { c as ActiveMenuProvider, a as useActiveMenu, d as useActiveMenuContext };","map":{"version":3,"mappings":"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","names":["ActiveMenuContext","createContext","ActiveMenuProvider","_ref","children","menu","_jsx","Provider","Object","value","getOffsetTop","element","offsetTop","offsetParent","useActiveMenu","options","activeClassName","offset","smooth","activeId","setActiveId","useState","containerRef","useRef","sectionRefs","Map","triggerRefs","useEffect","container","current","sections","size","detectClosest","r","closestId","firstId","closestTop","Infinity","id","section","entries","top","containerTop","getBoundingClientRect","sectionTop","window","addEventListener","removeEventListener","triggers","handleClick","e","preventDefault","get","target","HTMLElement","scrollTo","behavior","cleanupFunctions","trigger","handler","push","cleanupFunction","classList","remove","add","registerContainer","el","registerSection","set","registerTrigger","useActiveMenuContext","d","useContext"],"sources":["../../src/ActiveMenuContext.ts","../../src/ActiveMenuProvider.tsx","../../src/utils.ts","../../src/useActiveMenu.ts","../../src/useActiveMenuContext.ts"],"sourcesContent":[null,null,null,null,null]},"metadata":{},"sourceType":"module","externalDependencies":[]}